<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>kong 0.14到2.0版本 API变更 | mutoulazy's space</title><meta name="keywords" content="linux,kong"><meta name="author" content="mutoulazy"><meta name="copyright" content="mutoulazy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="kong 0.14到2.0X版本 API变更Service Object对象实体Json Demo 12345678910111213141516&amp;#123;    &quot;id&quot;: &quot;9748f662-7711-4a90-8186-dc02f10eb0f5&quot;,    &quot;created_at&quot;: 1422386534,    &quot;upd">
<meta property="og:type" content="article">
<meta property="og:title" content="kong 0.14到2.0版本 API变更">
<meta property="og:url" content="https://mutoulazy.github.io/2020/04/21/linux/kong-0.14-to-2.0-api-change/index.html">
<meta property="og:site_name" content="mutoulazy&#39;s space">
<meta property="og:description" content="kong 0.14到2.0X版本 API变更Service Object对象实体Json Demo 12345678910111213141516&amp;#123;    &quot;id&quot;: &quot;9748f662-7711-4a90-8186-dc02f10eb0f5&quot;,    &quot;created_at&quot;: 1422386534,    &quot;upd">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png">
<meta property="article:published_time" content="2020-04-21T02:00:00.000Z">
<meta property="article:modified_time" content="2021-07-28T09:58:05.000Z">
<meta property="article:author" content="mutoulazy">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="kong">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://mutoulazy.github.io/2020/04/21/linux/kong-0.14-to-2.0-api-change/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: mutoulazy","link":"链接: ","source":"来源: mutoulazy's space","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'kong 0.14到2.0版本 API变更',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-07-28 17:58:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/k8s.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">98</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">84</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">mutoulazy's space</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">kong 0.14到2.0版本 API变更</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-04-21T02:00:00.000Z" title="发表于 2020-04-21 10:00:00">2020-04-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-07-28T09:58:05.000Z" title="更新于 2021-07-28 17:58:05">2021-07-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/linux/">linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="kong 0.14到2.0版本 API变更"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="kong-0-14到2-0X版本-API变更"><a href="#kong-0-14到2-0X版本-API变更" class="headerlink" title="kong 0.14到2.0X版本 API变更"></a>kong 0.14到2.0X版本 API变更</h1><h2 id="Service-Object"><a href="#Service-Object" class="headerlink" title="Service Object"></a>Service Object</h2><p>对象实体Json Demo</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;9748f662-7711-4a90-8186-dc02f10eb0f5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;updated_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;my-service&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;retries&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">&quot;protocol&quot;</span>: <span class="string">&quot;http&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;example.com&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="number">80</span>,</span><br><span class="line">    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;/some_api&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;connect_timeout&quot;</span>: <span class="number">60000</span>,</span><br><span class="line">    <span class="attr">&quot;write_timeout&quot;</span>: <span class="number">60000</span>,</span><br><span class="line">    <span class="attr">&quot;read_timeout&quot;</span>: <span class="number">60000</span>,</span><br><span class="line">    <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;user-level&quot;</span>, <span class="string">&quot;low-priority&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;client_certificate&quot;</span>: &#123;<span class="attr">&quot;id&quot;</span>:<span class="string">&quot;4e3ad2e4-0bc4-4638-8e34-c84a417ba39b&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h3><p>POST /services/</p>
<table>
<thead>
<tr>
<th>Request json对象参数</th>
<th>0.14</th>
<th>2.0x</th>
</tr>
</thead>
<tbody><tr>
<td>The Service name</td>
<td>name</td>
<td>name</td>
</tr>
<tr>
<td>The protocol used to communicate with the upstream. Accepted values are: “grpc”, “grpcs”, “http”, “https”, “tcp”, “tls”. Defaults to “http”.</td>
<td>protocol</td>
<td>protocol</td>
</tr>
<tr>
<td>The host of the upstream server.</td>
<td>host</td>
<td>host</td>
</tr>
<tr>
<td>The upstream server port. Defaults to 80.</td>
<td>port</td>
<td>port</td>
</tr>
<tr>
<td>The path to be used in requests to the upstream server.</td>
<td>path</td>
<td>path</td>
</tr>
<tr>
<td>The number of retries to execute upon failure to proxy. The default is 5.</td>
<td>retries</td>
<td>retries</td>
</tr>
<tr>
<td>The timeout in milliseconds for establishing a connection to the upstream server. Defaults to 60000.</td>
<td>connect_timeout</td>
<td>connect_timeout</td>
</tr>
<tr>
<td>The timeout in milliseconds between two successive write operations for transmitting a request to the upstream server. Defaults to 60000.</td>
<td>write_timeout</td>
<td>write_timeout</td>
</tr>
<tr>
<td>The timeout in milliseconds between two successive read operations for transmitting a request to the upstream server. Defaults to 60000.</td>
<td>read_timeout</td>
<td>read_timeout</td>
</tr>
<tr>
<td>Shorthand attribute to set protocol, host, port and path at once. This attribute is write-only (the Admin API never “returns” the url).</td>
<td>url</td>
<td>url</td>
</tr>
<tr>
<td>An optional set of strings associated with the Service, for grouping and filtering</td>
<td></td>
<td>tags</td>
</tr>
<tr>
<td>Certificate to be used as client certificate while TLS handshaking to the upstream server. With form-encoded, the notation is client_certificate.id=<client_certificate id>. With JSON, use “client_certificate”:{“id”:”<client_certificate id>“}.</td>
<td></td>
<td>client_certificate</td>
</tr>
</tbody></table>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>GET /services/{service name or id}<br>GET /routes/{route id}/service<br>GET /services/ （offset、size可分页）</p>
<h4 id="2-0x-新增接口"><a href="#2-0x-新增接口" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>GET /certificates/{certificate id}/services/{service name or id}<br>GET /routes/{route name or id}/service<br>GET /plugins/{plugin id}/service</p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>PATCH /services/{name or id}<br>PATCH /routes/{route id}/service</p>
<h4 id="2-0x-新增接口-1"><a href="#2-0x-新增接口-1" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PATCH /certificates/{certificate id}/services/{service name or id}<br>PATCH /routes/{route name or id}/service<br>PATCH /plugins/{plugin id}/service</p>
<h3 id="更新或者新建"><a href="#更新或者新建" class="headerlink" title="更新或者新建"></a>更新或者新建</h3><p>PUT /services/{name or id}</p>
<h4 id="2-0x-新增接口-2"><a href="#2-0x-新增接口-2" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PUT /certificates/{certificate id}/services/{service name or id}<br>PUT /routes/{route name or id}/service<br>PUT /plugins/{plugin id}/service</p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>DELETE /services/{name or id}</p>
<h4 id="2-0x-新增接口-3"><a href="#2-0x-新增接口-3" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>DELETE /certificates/{certificate id}/services/{service name or id}<br>DELETE /routes/{route name or id}/service</p>
<h2 id="Route-Object"><a href="#Route-Object" class="headerlink" title="Route Object"></a>Route Object</h2><p>对象实体Json Demo</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;d35165e2-d03e-461a-bdeb-dad0a112abfe&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;updated_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;my-route&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;protocols&quot;</span>: [<span class="string">&quot;http&quot;</span>, <span class="string">&quot;https&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;methods&quot;</span>: [<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;hosts&quot;</span>: [<span class="string">&quot;example.com&quot;</span>, <span class="string">&quot;foo.test&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: [<span class="string">&quot;/foo&quot;</span>, <span class="string">&quot;/bar&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;headers&quot;</span>: &#123;<span class="attr">&quot;x-another-header&quot;</span>:[<span class="string">&quot;bla&quot;</span>], <span class="attr">&quot;x-my-header&quot;</span>:[<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>]&#125;,</span><br><span class="line">    <span class="attr">&quot;https_redirect_status_code&quot;</span>: <span class="number">426</span>,</span><br><span class="line">    <span class="attr">&quot;regex_priority&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;strip_path&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;path_handling&quot;</span>: <span class="string">&quot;v0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;preserve_host&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;user-level&quot;</span>, <span class="string">&quot;low-priority&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;service&quot;</span>: &#123;<span class="attr">&quot;id&quot;</span>:<span class="string">&quot;af8330d3-dbdc-48bd-b1be-55b98608834b&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="新增-1"><a href="#新增-1" class="headerlink" title="新增"></a>新增</h3><p>POST /routes/</p>
<table>
<thead>
<tr>
<th>Request json对象参数</th>
<th>0.14</th>
<th>2.0x</th>
</tr>
</thead>
<tbody><tr>
<td>A list of the protocols this Route should allow. When set to [“https”], HTTP requests are answered with a request to upgrade to HTTPS. Defaults to [“http”, “https”].</td>
<td>protocols</td>
<td>protocols</td>
</tr>
<tr>
<td>A list of HTTP methods that match this Route.</td>
<td>methods</td>
<td>methods</td>
</tr>
<tr>
<td>A list of domain names that match this Route. With form-encoded, the notation is hosts[]=example.com&amp;hosts[]=foo.test. With JSON, use an Array.</td>
<td>hosts</td>
<td>hosts</td>
</tr>
<tr>
<td>A list of paths that match this Route. With form-encoded, the notation is paths[]=/foo&amp;paths[]=/bar. With JSON, use an Array.</td>
<td>paths</td>
<td>paths</td>
</tr>
<tr>
<td>Determines the relative order of this Route against others when evaluating regex paths. Routes with higher numbers will have their regex paths evaluated first. Defaults to 0.</td>
<td>regex_priority</td>
<td>regex_priority</td>
</tr>
<tr>
<td>When matching a Route via one of the paths, strip the matching prefix from the upstream request URL. Defaults to true.</td>
<td>strip_path</td>
<td>strip_path</td>
</tr>
<tr>
<td>When matching a Route via one of the hosts domain names, use the request Host header in the upstream request headers. By default set to false, and the upstream Host header will be that of the Service’s host.</td>
<td>preserve_host</td>
<td>preserve_host</td>
</tr>
<tr>
<td>The Service this Route is associated to.</td>
<td>service</td>
<td>service</td>
</tr>
<tr>
<td>The name of the Route.</td>
<td></td>
<td>name</td>
</tr>
<tr>
<td>One or more lists of values indexed by header name that will cause this Route to match if present in the request.</td>
<td></td>
<td>headers</td>
</tr>
<tr>
<td>The status code Kong responds with when all properties of a Route match except the protocol i.e. if the protocol of the request is HTTP instead of HTTPS</td>
<td></td>
<td>https_redirect_status_code</td>
</tr>
<tr>
<td>Controls how the Service path, Route path and requested path are combined when sending a request to the upstream.</td>
<td></td>
<td>path_handling</td>
</tr>
<tr>
<td>A list of SNIs that match this Route when using stream routing.</td>
<td></td>
<td>snis</td>
</tr>
<tr>
<td>A list of IP sources of incoming connections that match this Route when using stream routing.</td>
<td></td>
<td>sources</td>
</tr>
<tr>
<td>A list of IP destinations of incoming connections that match this Route when using stream routing.</td>
<td></td>
<td>destinations</td>
</tr>
<tr>
<td>An optional set of strings associated with the Route, for grouping and filtering.</td>
<td></td>
<td>tags</td>
</tr>
</tbody></table>
<h3 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h3><p>GET /routes/{id}<br>GET /routes （offset、size可分页）<br>GET /services/{service name or id}/routes</p>
<h4 id="2-0x-新增接口-4"><a href="#2-0x-新增接口-4" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>GET /routes/{route name or id}<br>GET /services/{service name or id}/routes/{route name or id}<br>GET /plugins/{plugin id}/route</p>
<h3 id="更新-1"><a href="#更新-1" class="headerlink" title="更新"></a>更新</h3><p>PATCH /routes/{id}</p>
<h4 id="2-0x-新增接口-5"><a href="#2-0x-新增接口-5" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PATCH /routes/{route name or id}<br>PATCH /services/{service name or id}/routes/{route name or id}<br>PATCH /plugins/{plugin id}/route</p>
<h3 id="更新或者新建-1"><a href="#更新或者新建-1" class="headerlink" title="更新或者新建"></a>更新或者新建</h3><p>PUT /routes/{id}</p>
<h4 id="2-0x-新增接口-6"><a href="#2-0x-新增接口-6" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PUT /routes/{route name or id}<br>PUT /services/{service name or id}/routes/{route name or id}<br>PUT /plugins/{plugin id}/route</p>
<h3 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h3><p>DELETE /routes/{id}</p>
<h4 id="2-0x-新增接口-7"><a href="#2-0x-新增接口-7" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>DELETE /routes/{route name or id}<br>DELETE /services/{service name or id}/routes/{route name or id}</p>
<h2 id="Plugin-Object"><a href="#Plugin-Object" class="headerlink" title="Plugin Object"></a>Plugin Object</h2><p>对象实体Json Demo</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;ce44eef5-41ed-47f6-baab-f725cecf98c7&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;rate-limiting&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;route&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;service&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;consumer&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;config&quot;</span>: &#123;<span class="attr">&quot;hour&quot;</span>:<span class="number">500</span>, <span class="attr">&quot;minute&quot;</span>:<span class="number">20</span>&#125;,</span><br><span class="line">    <span class="attr">&quot;protocols&quot;</span>: [<span class="string">&quot;http&quot;</span>, <span class="string">&quot;https&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;user-level&quot;</span>, <span class="string">&quot;low-priority&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="新增-2"><a href="#新增-2" class="headerlink" title="新增"></a>新增</h3><p>POST /plugins/</p>
<table>
<thead>
<tr>
<th>Request json对象参数</th>
<th>0.14</th>
<th>2.0x</th>
</tr>
</thead>
<tbody><tr>
<td>The name of the Plugin that’s going to be added. Currently the Plugin must be installed in every Kong instance separately.</td>
<td>name</td>
<td>name</td>
</tr>
<tr>
<td>The unique identifier of the consumer that overrides the existing settings for this specific consumer on incoming requests.</td>
<td>consumer_id</td>
<td><strong>consumer</strong></td>
</tr>
<tr>
<td>The unique identifier of the service that overrides the existing settings for this specific service on incoming requests.</td>
<td>service_id</td>
<td><strong>service</strong></td>
</tr>
<tr>
<td>The unique identifier of the route that overrides the existing settings for this specific route on incoming requests.</td>
<td>route_id</td>
<td><strong>route</strong></td>
</tr>
<tr>
<td>The configuration properties for the Plugin which can be found on the plugins documentation page in the Kong Hub.</td>
<td>config</td>
<td>config</td>
</tr>
<tr>
<td>Whether the plugin is applied. Default: true.</td>
<td>enabled</td>
<td>enabled</td>
</tr>
<tr>
<td>. For example, plugins that only work in stream mode will only support “tcp” and “tls”. Defaults to [“grpc”, “grpcs”, “http”, “https”].</td>
<td></td>
<td>protocols</td>
</tr>
<tr>
<td>An optional set of strings associated with the Plugin, for grouping and filtering</td>
<td></td>
<td>tags</td>
</tr>
</tbody></table>
<h4 id="2-0x-新增接口-8"><a href="#2-0x-新增接口-8" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>POST /routes/{route id}/plugins<br>POST /services/{service id}/plugins<br>POST /consumers/{consumer id}/plugins</p>
<h3 id="查询-2"><a href="#查询-2" class="headerlink" title="查询"></a>查询</h3><p>GET /plugins/{id}<br>GET /plugins/<br>GET /plugins/enabled<br>GET /plugins/schema/{plugin name}</p>
<h4 id="2-0x-新增接口-9"><a href="#2-0x-新增接口-9" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>GET /routes/{route id}/plugins<br>GET /services/{service id}/plugins<br>GET /consumers/{consumer id}/plugins</p>
<p>GET /routes/{route name or id}/plugins/{plugin id}<br>GET /services/{service name or id}/plugins/{plugin id}<br>GET /consumers/{consumer username or id}/plugins/{plugin id}</p>
<h3 id="更新-2"><a href="#更新-2" class="headerlink" title="更新"></a>更新</h3><p>PATCH /plugins/{plugin id}</p>
<h4 id="2-0x-新增接口-10"><a href="#2-0x-新增接口-10" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PATCH /routes/{route name or id}/plugins/{plugin id}<br>PATCH /services/{service name or id}/plugins/{plugin id}<br>PATCH /consumers/{consumer username or id}/plugins/{plugin id}</p>
<h3 id="更新或者新建-2"><a href="#更新或者新建-2" class="headerlink" title="更新或者新建"></a>更新或者新建</h3><p>PUT /plugins/  在2.0 修改为 PUT /plugins/{plugin id}</p>
<h4 id="2-0x-新增接口-11"><a href="#2-0x-新增接口-11" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PUT /routes/{route name or id}/plugins/{plugin id}<br>PUT /services/{service name or id}/plugins/{plugin id}<br>PUT /consumers/{consumer username or id}/plugins/{plugin id}</p>
<h3 id="删除-2"><a href="#删除-2" class="headerlink" title="删除"></a>删除</h3><p>DELETE /plugins/{plugin id}</p>
<h4 id="2-0x-新增接口-12"><a href="#2-0x-新增接口-12" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>DELETE /routes/{route name or id}/plugins/{plugin id}<br>DELETE /services/{service name or id}/plugins/{plugin id}<br>DELETE /consumers/{consumer username or id}/plugins/{plugin id}</p>
<h2 id="Upstream-Objects"><a href="#Upstream-Objects" class="headerlink" title="Upstream Objects"></a>Upstream Objects</h2><p>对象实体Json Demo</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;58c8ccbb-eafb-4566-991f-2ed4f678fa70&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;created_at&quot;</span>: <span class="number">1422386534</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;my-upstream&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;algorithm&quot;</span>: <span class="string">&quot;round-robin&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hash_on&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hash_fallback&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hash_on_cookie_path&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;slots&quot;</span>: <span class="number">10000</span>,</span><br><span class="line">    <span class="attr">&quot;healthchecks&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;active&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;https_verify_certificate&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;unhealthy&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;http_statuses&quot;</span>: [<span class="number">429</span>, <span class="number">404</span>, <span class="number">500</span>, <span class="number">501</span>, <span class="number">502</span>, <span class="number">503</span>, <span class="number">504</span>, <span class="number">505</span>],</span><br><span class="line">                <span class="attr">&quot;tcp_failures&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;timeouts&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;http_failures&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;interval&quot;</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;http_path&quot;</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;timeout&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;healthy&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;http_statuses&quot;</span>: [<span class="number">200</span>, <span class="number">302</span>],</span><br><span class="line">                <span class="attr">&quot;interval&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;successes&quot;</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;https_sni&quot;</span>: <span class="string">&quot;example.com&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;concurrency&quot;</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;http&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;passive&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;unhealthy&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;http_failures&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;http_statuses&quot;</span>: [<span class="number">429</span>, <span class="number">500</span>, <span class="number">503</span>],</span><br><span class="line">                <span class="attr">&quot;tcp_failures&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;timeouts&quot;</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;http&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;healthy&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;successes&quot;</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">&quot;http_statuses&quot;</span>: [<span class="number">200</span>, <span class="number">201</span>, <span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, <span class="number">205</span>, <span class="number">206</span>, <span class="number">207</span>, <span class="number">208</span>, <span class="number">226</span>, <span class="number">300</span>, <span class="number">301</span>, <span class="number">302</span>, <span class="number">303</span>, <span class="number">304</span>, <span class="number">305</span>, <span class="number">306</span>, <span class="number">307</span>, <span class="number">308</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;threshold&quot;</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;user-level&quot;</span>, <span class="string">&quot;low-priority&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;host_header&quot;</span>: <span class="string">&quot;example.com&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="新增-3"><a href="#新增-3" class="headerlink" title="新增"></a>新增</h3><p>POST /upstreams/</p>
<table>
<thead>
<tr>
<th>Request json对象参数</th>
<th>0.14</th>
<th>2.0x</th>
</tr>
</thead>
<tbody><tr>
<td>This is a hostname, which must be equal to the host of a Service.</td>
<td>name</td>
<td>name</td>
</tr>
<tr>
<td>The number of slots in the loadbalancer algorithm (10-65536, defaults to 1000).</td>
<td>slots</td>
<td>slots</td>
</tr>
<tr>
<td>What to use as hashing input: none, consumer, ip, header, or cookie (defaults to none resulting in a weighted-round-robin scheme).</td>
<td>hash_on</td>
<td>hash_on</td>
</tr>
<tr>
<td>What to use as hashing input if the primary hash_on does not return a hash</td>
<td>hash_fallback</td>
<td>hash_fallback</td>
</tr>
<tr>
<td>The header name to take the value from as hash input (only required when hash_on is set to header).</td>
<td>hash_on_header</td>
<td>hash_on_header</td>
</tr>
<tr>
<td>The header name to take the value from as hash input (only required when hash_fallback is set to header).</td>
<td>hash_fallback_header</td>
<td>hash_fallback_header</td>
</tr>
<tr>
<td>The cookie name to take the value from as hash input (only required when hash_on or hash_fallback is set to cookie)</td>
<td>hash_on_cookie</td>
<td>hash_on_cookie</td>
</tr>
<tr>
<td>The cookie path to set in the response headers</td>
<td>hash_on_cookie_path</td>
<td>hash_on_cookie_path</td>
</tr>
<tr>
<td>Socket timeout for active health checks (in seconds). Defaults to 1.</td>
<td>healthchecks.active.timeout</td>
<td>healthchecks.active.timeout</td>
</tr>
<tr>
<td>Number of targets to check concurrently in active health checks. Defaults to 10</td>
<td>healthchecks.active.concurrency</td>
<td>healthchecks.active.concurrency</td>
</tr>
<tr>
<td>Path to use in GET HTTP request to run as a probe on active health checks.</td>
<td>healthchecks.active.http_path</td>
<td>healthchecks.active.http_path</td>
</tr>
<tr>
<td>Interval between active health checks for healthy targets (in seconds). A value of zero indicates that active probes for healthy targets should not be performed. Defaults to 0</td>
<td>healthchecks.active.healthy.interval</td>
<td>healthchecks.active.healthy.interval</td>
</tr>
<tr>
<td>An array of HTTP statuses to consider a success, indicating healthiness, when returned by a probe in active health checks.  Defaults to 0</td>
<td>healthchecks.active.healthy.http_statuses</td>
<td>healthchecks.active.healthy.http_statuses</td>
</tr>
<tr>
<td>Number of successes in active probes (as defined by healthchecks.active.healthy.http_statuses) to consider a target healthy. Defaults to 0</td>
<td>healthchecks.active.healthy.successes</td>
<td>healthchecks.active.healthy.successes</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
<tr>
<td>An optional set of strings associated with the Upstream, for grouping and filtering.</td>
<td></td>
<td>tags</td>
</tr>
<tr>
<td>The hostname to be used as Host header when proxying requests through Kong.</td>
<td></td>
<td>host_header</td>
</tr>
</tbody></table>
<h3 id="查询-3"><a href="#查询-3" class="headerlink" title="查询"></a>查询</h3><p>GET /upstreams/{name or id}<br>GET /upstreams/ （offset、size可分页）</p>
<p>GET /upstreams/{name or id}/health/</p>
<h4 id="2-0x-新增接口-13"><a href="#2-0x-新增接口-13" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>GET /targets/{target host:port or id}/upstream</p>
<h3 id="更新-3"><a href="#更新-3" class="headerlink" title="更新"></a>更新</h3><p>PATCH /upstreams/{name or id}</p>
<h4 id="2-0x-新增接口-14"><a href="#2-0x-新增接口-14" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PATCH /targets/{target host:port or id}/upstream</p>
<h3 id="更新或者新建-3"><a href="#更新或者新建-3" class="headerlink" title="更新或者新建"></a>更新或者新建</h3><p>PUT /upstreams/  在2.0 修改为 PUT /upstreams/{upstream name or id}</p>
<h4 id="2-0x-新增接口-15"><a href="#2-0x-新增接口-15" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>PUT /targets/{target host:port or id}/upstream</p>
<h3 id="删除-3"><a href="#删除-3" class="headerlink" title="删除"></a>删除</h3><p>DELETE /upstreams/{name or id}</p>
<h4 id="2-0x-新增接口-16"><a href="#2-0x-新增接口-16" class="headerlink" title="2.0x 新增接口"></a>2.0x 新增接口</h4><p>DELETE /targets/{target host:port or id}/upstream</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://docs.konghq.com/0.14.x/admin-api/#add-service">0.14</a><br><a target="_blank" rel="noopener" href="https://docs.konghq.com/2.0.x/admin-api/#supported-content-types">2.0x</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">mutoulazy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://mutoulazy.github.io/2020/04/21/linux/kong-0.14-to-2.0-api-change/">https://mutoulazy.github.io/2020/04/21/linux/kong-0.14-to-2.0-api-change/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://mutoulazy.github.io" target="_blank">mutoulazy's space</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a><a class="post-meta__tags" href="/tags/kong/">kong</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/05/02/go/go_interview/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">go 面试题</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/14/kubernetes/framework/kubernetes-base-framework/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Kubernetes 基础架构</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/04/09/linux/%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85kong%200.14%E7%89%88%E6%9C%AC/" title="源码安装kong 0.14版本"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-09</div><div class="title">源码安装kong 0.14版本</div></div></a></div><div><a href="/2020/04/13/linux/%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85kong%202.0.3%E7%89%88%E6%9C%AC/" title="源码安装kong 2.0.3版本"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-13</div><div class="title">源码安装kong 2.0.3版本</div></div></a></div><div><a href="/2019/10/14/linux/Cgroups%20%E4%B8%8E%20Systemd/" title="Cgroups 与 Systemd"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-14</div><div class="title">Cgroups 与 Systemd</div></div></a></div><div><a href="/2019/10/13/linux/Cpu%E7%9A%84%E7%8A%B6%E6%80%81%E5%8F%96%E5%80%BC/" title="linux下CPU的指标"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-13</div><div class="title">linux下CPU的指标</div></div></a></div><div><a href="/2019/10/05/linux/cgroups/" title="cgroups"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-05</div><div class="title">cgroups</div></div></a></div><div><a href="/2019/10/02/linux/mysql%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98/" title="升级导致 mysql无法启动"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-02</div><div class="title">升级导致 mysql无法启动</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/k8s.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">mutoulazy</div><div class="author-info__description">往者不谏，来者可追</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">98</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">84</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mutoulazy"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/mutoulazy" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:mutoulazy@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#kong-0-14%E5%88%B02-0X%E7%89%88%E6%9C%AC-API%E5%8F%98%E6%9B%B4"><span class="toc-text">kong 0.14到2.0X版本 API变更</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Service-Object"><span class="toc-text">Service Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E"><span class="toc-text">新增</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-text">更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-1"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%88%96%E8%80%85%E6%96%B0%E5%BB%BA"><span class="toc-text">更新或者新建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-2"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-text">删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-3"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Route-Object"><span class="toc-text">Route Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-1"><span class="toc-text">新增</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-1"><span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-4"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-1"><span class="toc-text">更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-5"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%88%96%E8%80%85%E6%96%B0%E5%BB%BA-1"><span class="toc-text">更新或者新建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-6"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-1"><span class="toc-text">删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-7"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Plugin-Object"><span class="toc-text">Plugin Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-2"><span class="toc-text">新增</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-8"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-2"><span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-9"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-2"><span class="toc-text">更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-10"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%88%96%E8%80%85%E6%96%B0%E5%BB%BA-2"><span class="toc-text">更新或者新建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-11"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-2"><span class="toc-text">删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-12"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Upstream-Objects"><span class="toc-text">Upstream Objects</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E-3"><span class="toc-text">新增</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-3"><span class="toc-text">查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-13"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-3"><span class="toc-text">更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-14"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%88%96%E8%80%85%E6%96%B0%E5%BB%BA-3"><span class="toc-text">更新或者新建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-15"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-3"><span class="toc-text">删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-0x-%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3-16"><span class="toc-text">2.0x 新增接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text">参考</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/04/30/kubernetes/gitea+drone/" title="gitea与drone CICD"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="gitea与drone CICD"/></a><div class="content"><a class="title" href="/2021/04/30/kubernetes/gitea+drone/" title="gitea与drone CICD">gitea与drone CICD</a><time datetime="2021-04-30T03:00:00.000Z" title="发表于 2021-04-30 11:00:00">2021-04-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/26/kubernetes/filebeat-log/" title="filebeat采集集群应用日志"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="filebeat采集集群应用日志"/></a><div class="content"><a class="title" href="/2021/04/26/kubernetes/filebeat-log/" title="filebeat采集集群应用日志">filebeat采集集群应用日志</a><time datetime="2021-04-26T03:00:00.000Z" title="发表于 2021-04-26 11:00:00">2021-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/01/kubernetes/openLDAP/" title="openLDAP服务搭建与使用"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/img/tag-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="openLDAP服务搭建与使用"/></a><div class="content"><a class="title" href="/2021/04/01/kubernetes/openLDAP/" title="openLDAP服务搭建与使用">openLDAP服务搭建与使用</a><time datetime="2021-04-01T05:24:00.000Z" title="发表于 2021-04-01 13:24:00">2021-04-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By mutoulazy</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://mutoulazy.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>